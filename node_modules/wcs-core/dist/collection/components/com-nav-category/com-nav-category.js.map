{"version":3,"file":"com-nav-category.js","sourceRoot":"","sources":["../../../src/components/com-nav-category/com-nav-category.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    ComponentInterface,\n    Element,\n    Event,\n    EventEmitter,\n    h,\n    Host,\n    Listen, Method,\n    Prop,\n    State\n} from '@stencil/core';\nimport { CategoryOpenedEventDetail } from '../com-nav/com-nav-interface';\nimport { inheritAriaAttributes, inheritAttributes, setOrRemoveAttribute, isEnterKey, isSpaceKey } from \"../../utils/helpers\";\nimport { comNavDidLoadWithResizeObserver } from \"../com-nav/com-nav-utils\";\nimport { ComNavSize } from \"../com-nav/com-nav-size\";\nimport { AriaAttributeName, MutableAriaAttribute } from \"../../utils/mutable-aria-attribute\";\n\nconst COM_NAV_CATEGORY_INHERITED_ATTRS = ['title'];\n\n/**\n * The com-nav-category is a subcomponent of `wcs-com-nav`. It represents a category nested inside a `wcs-com-nav-submenu`.\n * \n * @cssprop --wcs-com-nav-category-label-font-size - Label font-size\n * @cssprop --wcs-com-nav-category-label-mobile-font-weight - Label font-weight on mobile\n * @cssprop --wcs-com-nav-category-label-mobile-color - Label color on mobile \n * @cssprop --wcs-com-nav-category-label-desktop-font-weight - Label font-weight on desktop\n * @cssprop --wcs-com-nav-category-label-desktop-color - Label color on mobile\n * @cssprop --wcs-com-nav-category-item-mobile-color - Color of category item (mobile)\n * @cssprop --wcs-com-nav-category-item-mobile-font-weight - Font weight of category item (mobile)\n * @cssprop --wcs-com-nav-category-item-mobile-spacing-top - Spacing top around items group (mobile)\n * @cssprop --wcs-com-nav-category-item-mobile-spacing-left - Spacing left around items group (mobile)\n * @cssprop --wcs-com-nav-category-item-mobile-gap - Gap between each category item (mobile)\n * @cssprop --wcs-com-nav-category-label-desktop-gap - Gap inside category label, between text and arrow\n * @cssprop --wcs-com-nav-category-label-desktop-focus-outline-color - Focus outline of the label (desktop)\n * @cssprop --wcs-com-nav-category-desktop-menu-background-color - Background color of the category menu (desktop)\n * @cssprop --wcs-com-nav-category-desktop-menu--border-left-width - Border left width of the category menu\n * @cssprop --wcs-com-nav-category-desktop-menu--border-left-color - Border left color of the category menu\n * @cssprop --wcs-com-nav-category-desktop-menu-background-indicator-color - Indicator color on top of menu\n * @cssprop --wcs-com-nav-category-desktop-menu-padding-top - Padding top of menu\n * @cssprop --wcs-com-nav-category-desktop-menu-padding-bottom - Padding bottom of menu\n * @cssprop --wcs-com-nav-category-desktop-menu-padding-left - Padding left of menu\n * @cssprop --wcs-com-nav-category-desktop-menu-padding-right - Padding right of menu\n * @cssprop --wcs-com-nav-category-desktop-menu-gap - Gap between each item (desktop)\n * @cssprop --wcs-com-nav-category-item-desktop-color - Color of category item (desktop)\n * @cssprop --wcs-com-nav-category-item-desktop-font-weight - Font weight of category item (desktop)\n */\n@Component({\n    tag: 'wcs-com-nav-category',\n    styleUrl: 'com-nav-category.scss',\n    shadow: true,\n})\nexport class ComNavCategory implements ComponentInterface, MutableAriaAttribute {\n    @Element() private el!: HTMLWcsComNavCategoryElement;\n    private nativeButton!: HTMLButtonElement;\n    private inheritedAttributes: { [k: string]: any } = {};\n    \n    @Prop() label: string;\n    @State() private categoryOpen: boolean = false;\n    @Event() wcsCategoryOpened: EventEmitter<CategoryOpenedEventDetail>;\n\n    private categoryItemsId = `wcs-com-nav-category-items`;\n    private resizeObserver: ResizeObserver;\n    /**\n     * To re-trigger re-render in order to render a button in case of desktop or a heading in mobile case\n     * @private\n     */\n    @State() public currentActiveSizing: ComNavSize = 'desktop';\n\n    @Listen('click', {target: 'window'})\n    onWindowClickEvent(_: MouseEvent) {\n        if (this.categoryOpen) this.categoryOpen = false;\n    }\n\n    @Listen('wcsCategoryOpened', {target: 'window'})\n    onSubmenuOpened(event: CustomEvent<CategoryOpenedEventDetail>) {\n        if (event.detail.categoryElement !== this.el) {\n            this.categoryOpen = false;\n        }\n    }\n\n    componentDidLoad(): void {\n        if(!this.resizeObserver) {\n            this.resizeObserver = comNavDidLoadWithResizeObserver(this);\n            this.resizeObserver.observe(document.body);\n        }\n    }\n\n    /**\n     * Handle key down on category items\n     * @param _event the keyboard event\n     * @private\n     */\n    private handleCategoryItemsKeyDown(_event: KeyboardEvent) {\n        if ((isSpaceKey(_event)) || isEnterKey(_event)) {\n            this.handleItemClick(_event);\n        }\n    }\n    \n    componentWillLoad(): Promise<void> | void {\n        this.inheritedAttributes = {\n            ...inheritAriaAttributes(this.el),\n            ...inheritAttributes(this.el, COM_NAV_CATEGORY_INHERITED_ATTRS)\n        };\n    }\n\n    @Method()\n    async setAriaAttribute(attr: AriaAttributeName, value: string | null | undefined) {\n        setOrRemoveAttribute(this.nativeButton, attr, value);\n    }\n\n    /**\n     * Close the category\n     */\n    @Method()\n    async close() {\n        this.categoryOpen = false;\n    }\n\n    /**\n     * Opens the category\n     */\n    @Method()\n    async open() {\n        this.categoryOpen = true;\n    }\n\n    /**\n     * When the user clicks on the menu, we do not propagate the native event and we launch a custom event to manage\n     * the closing of the menu correctly\n     */\n    private onClick(evt: MouseEvent) {\n        evt.stopPropagation();\n        this.wcsCategoryOpened.emit({categoryElement: this.el})\n    }\n\n\n    /**\n     * Close the category and fire item click if we detect a mouse click on a slotted `a` element.\n     * @param evt\n     * @private\n     */\n    private handleItemClick(evt: UIEvent) {\n        if ((evt.target as HTMLElement).tagName === 'A') {\n            this.close();\n        }\n    }\n\n    disconnectedCallback(): void {\n        this.resizeObserver?.disconnect();\n    }\n\n    render(): any {\n        return (\n            <Host role={\"listitem\"} onClick={evt => this.onClick(evt)}>\n                {\n                    this.currentActiveSizing === 'mobile' ?\n                        <h3 role=\"presentation\" class=\"label-container\">\n                            <span class=\"label\">{this.label}</span>\n                        </h3>\n                        : <button class=\"label-container\"\n                            aria-controls={this.categoryItemsId}\n                            aria-expanded={this.categoryOpen ? 'true' : 'false'}\n                            ref={(el) => (this.nativeButton = el)}\n                            onClick={_ => this.categoryOpen = !this.categoryOpen}\n                            {...this.inheritedAttributes}>\n                            <span class=\"label\">{this.label}</span>\n                            <span class=\"arrow-container\">\n                                <span aria-hidden=\"true\" class=\"arrow-icon\">&#xf107;</span>\n                            </span>\n                        </button>\n                }\n                <div class=\"item-container\"\n                    role=\"list\"\n                    aria-label={this.label}\n                    id={this.categoryItemsId}\n                    tabIndex={-1}\n                    data-open={this.categoryOpen}\n                    onKeyDown={evt => this.handleCategoryItemsKeyDown(evt)}\n                    onClick={(evt) => this.handleItemClick(evt)}>\n                    <slot/>\n                </div>\n            </Host>\n        )\n    }\n\n}\n"]}