{"version":3,"names":["comNavCategoryCss","WcsComNavCategoryStyle0","COM_NAV_CATEGORY_INHERITED_ATTRS","ComNavCategory","this","inheritedAttributes","categoryItemsId","onWindowClickEvent","_","categoryOpen","onSubmenuOpened","event","detail","categoryElement","el","componentDidLoad","resizeObserver","comNavDidLoadWithResizeObserver","observe","document","body","handleCategoryItemsKeyDown","_event","isSpaceKey","isEnterKey","handleItemClick","componentWillLoad","Object","assign","inheritAriaAttributes","inheritAttributes","setAriaAttribute","attr","value","setOrRemoveAttribute","nativeButton","close","open","onClick","evt","stopPropagation","wcsCategoryOpened","emit","target","tagName","disconnectedCallback","_a","disconnect","render","h","Host","key","role","currentActiveSizing","class","label","ref","id","tabIndex","onKeyDown"],"sources":["src/components/com-nav-category/com-nav-category.scss?tag=wcs-com-nav-category&encapsulation=shadow","src/components/com-nav-category/com-nav-category.tsx"],"sourcesContent":["@import '../../style/focus-outline.scss';\n@import '../com-nav/com-nav-focus.scss';\n@import '../../style/breakpoints.scss';\n\n:host {\n    --wcs-com-nav-category-label-mobile-font-weight: var(--wcs-semantic-font-weight-medium);\n    --wcs-com-nav-category-label-mobile-color: var(--wcs-semantic-color-text-primary);\n\n    --wcs-com-nav-category-label-font-size: var(--wcs-semantic-font-size-label-1);\n    --wcs-com-nav-category-label-desktop-font-weight: var(--wcs-semantic-font-weight-roman);\n    --wcs-com-nav-category-label-desktop-color: var(--wcs-semantic-color-text-primary);\n    --wcs-com-nav-category-label-desktop-gap: var(--wcs-semantic-spacing-base);\n    --wcs-com-nav-category-label-desktop-focus-outline-color: var(--wcs-semantic-color-border-focus-base);\n\n    --wcs-com-nav-category-item-mobile-color: var(--wcs-semantic-color-text-primary);\n    --wcs-com-nav-category-item-mobile-font-weight: var(--wcs-semantic-font-weight-roman);\n    --wcs-com-nav-category-item-mobile-spacing-top: var(--wcs-semantic-spacing-large);\n    --wcs-com-nav-category-item-mobile-spacing-left: calc(var(--wcs-semantic-spacing-base) * 3);\n    --wcs-com-nav-category-item-mobile-gap: calc(var(--wcs-semantic-spacing-base) * 1.5);\n\n    --wcs-com-nav-category-desktop-menu-background-color: transparent;\n    --wcs-com-nav-category-desktop-menu-border-left-width: var(--wcs-semantic-border-width-default);\n    --wcs-com-nav-category-desktop-menu-border-left-color: var(--wcs-semantic-color-border-secondary);\n    --wcs-com-nav-category-desktop-menu-background-indicator-color: transparent;\n    --wcs-com-nav-category-desktop-menu-gap: calc(var(--wcs-semantic-spacing-base) * 3);\n    --wcs-com-nav-category-item-desktop-color: var(--wcs-semantic-color-text-primary);\n    --wcs-com-nav-category-item-desktop-font-weight: var(--wcs-semantic-font-weight-roman);\n\n    --wcs-com-nav-category-desktop-menu-padding-top: 50px;\n    --wcs-com-nav-category-desktop-menu-padding-bottom: 50px;\n    --wcs-com-nav-category-desktop-menu-padding-left: 50px;\n    --wcs-com-nav-category-desktop-menu-padding-right: 0;\n\n    display: block;\n    height: fit-content;\n\n    button {\n        background: none;\n        border: none;\n        padding: 0;\n        margin: 0;\n        font: inherit;\n        color: inherit;\n        cursor: initial;\n    }\n\n    .label-container {\n        margin: 0;\n        font-size: var(--wcs-com-nav-category-label-font-size);\n        font-weight: var(--wcs-com-nav-category-label-mobile-font-weight);\n        display: block;\n        color: var(--wcs-com-nav-category-label-mobile-color);\n\n        .arrow-container {\n            display: none;\n        }\n\n        .arrow-icon {\n            display: none;\n        }\n    }\n\n    .item-container {\n        display: flex;\n        flex-direction: column;\n        gap: var(--wcs-com-nav-category-item-mobile-gap);\n        margin-left: var(--wcs-com-nav-category-item-mobile-spacing-left);\n        margin-top: var(--wcs-com-nav-category-item-mobile-spacing-top);\n\n        ::slotted(wcs-com-nav-item) {\n            color: var(--wcs-com-nav-category-item-mobile-color);\n            font-weight: var(--wcs-com-nav-category-item-mobile-font-weight);\n        }\n    }\n}\n\n@include for-tablet-portrait-up {\n    :host {\n        padding-bottom: unset;\n\n        .item-container:not([data-open]) {\n            display: none;\n        }\n\n        button {\n            cursor: pointer;\n        }\n\n        .label-container {\n            display: flex;\n            align-items: center;\n            gap: var(--wcs-com-nav-category-label-desktop-gap);\n\n            font-weight: var(--wcs-com-nav-category-label-desktop-font-weight);\n            cursor: pointer;\n            user-select: none;\n            padding-left: unset;\n            color: var(--wcs-com-nav-category-label-desktop-color);\n\n            .arrow-icon {\n                display: inline-block;\n                font-family: icons;\n                font-size: 0.6rem;\n                line-height: 1;\n                box-sizing: border-box;\n            }\n\n            .arrow-container {\n                display: unset;\n            }\n        }\n\n        .label-container:focus-visible {\n            @include focus-outline(var(--wcs-com-nav-category-label-desktop-focus-outline-color), 5px, 0.1rem);\n        }\n\n        @supports not selector(.label-container:focus-visible) {\n            .label-container:focus-within {\n                @include focus-outline(var(--wcs-com-nav-category-label-desktop-focus-outline-color), 5px, 0.1rem);\n            }\n        }\n\n        button.label-container[aria-expanded=\"true\"]:after {\n            position: absolute;\n            left: calc(calc(calc(100% / 2) + calc(var(--wcs-com-content-max-width) / 8)) - calc(1.125rem / 2));\n            z-index: 2;\n            display: block;\n            width: 1.125rem;\n            height: 1.125rem;\n            content: \"\";\n            background-color: var(--wcs-com-nav-category-desktop-menu-background-indicator-color);\n            transform: rotate(45deg);\n        }\n\n        .item-container[data-open] {\n            position: absolute;\n            border-left: solid var(--wcs-com-nav-category-desktop-menu-border-left-width) var(--wcs-com-nav-category-desktop-menu-border-left-color);\n            left: calc(calc(100% / 2) + calc(var(--wcs-com-content-max-width) / 8));\n            top: 0;\n            right: 0;\n            padding: var(--wcs-com-nav-category-desktop-menu-padding-top) var(--wcs-com-nav-category-desktop-menu-padding-right) var(--wcs-com-nav-category-desktop-menu-padding-bottom) var(--wcs-com-nav-category-desktop-menu-padding-left);\n            background-blend-mode: multiply;\n            background-color: var(--wcs-com-nav-category-desktop-menu-background-color);\n            box-sizing: border-box;\n            height: calc(100%);\n\n            margin-left: unset;\n            margin-top: unset;\n\n            display: flex;\n            flex-direction: column;\n            gap: var(--wcs-com-nav-category-desktop-menu-gap);\n            align-items: start;\n\n            ::slotted(wcs-com-nav-item) {\n                color: var(--wcs-com-nav-category-item-desktop-color);\n                font-weight: var(--wcs-com-nav-category-item-desktop-font-weight);\n            }\n\n            ::slotted(wcs-com-nav-item:focus-within) {\n                @include com-nav-submenu-item-desktop-focus-outline(var(--wcs-com-nav-category-item-desktop-color));\n            }\n        }\n    }\n}\n","import {\n    Component,\n    ComponentInterface,\n    Element,\n    Event,\n    EventEmitter,\n    h,\n    Host,\n    Listen, Method,\n    Prop,\n    State\n} from '@stencil/core';\nimport { CategoryOpenedEventDetail } from '../com-nav/com-nav-interface';\nimport { inheritAriaAttributes, inheritAttributes, setOrRemoveAttribute, isEnterKey, isSpaceKey } from \"../../utils/helpers\";\nimport { comNavDidLoadWithResizeObserver } from \"../com-nav/com-nav-utils\";\nimport { ComNavSize } from \"../com-nav/com-nav-size\";\nimport { AriaAttributeName, MutableAriaAttribute } from \"../../utils/mutable-aria-attribute\";\n\nconst COM_NAV_CATEGORY_INHERITED_ATTRS = ['title'];\n\n/**\n * The com-nav-category is a subcomponent of `wcs-com-nav`. It represents a category nested inside a `wcs-com-nav-submenu`.\n * \n * @cssprop --wcs-com-nav-category-label-font-size - Label font-size\n * @cssprop --wcs-com-nav-category-label-mobile-font-weight - Label font-weight on mobile\n * @cssprop --wcs-com-nav-category-label-mobile-color - Label color on mobile \n * @cssprop --wcs-com-nav-category-label-desktop-font-weight - Label font-weight on desktop\n * @cssprop --wcs-com-nav-category-label-desktop-color - Label color on mobile\n * @cssprop --wcs-com-nav-category-item-mobile-color - Color of category item (mobile)\n * @cssprop --wcs-com-nav-category-item-mobile-font-weight - Font weight of category item (mobile)\n * @cssprop --wcs-com-nav-category-item-mobile-spacing-top - Spacing top around items group (mobile)\n * @cssprop --wcs-com-nav-category-item-mobile-spacing-left - Spacing left around items group (mobile)\n * @cssprop --wcs-com-nav-category-item-mobile-gap - Gap between each category item (mobile)\n * @cssprop --wcs-com-nav-category-label-desktop-gap - Gap inside category label, between text and arrow\n * @cssprop --wcs-com-nav-category-label-desktop-focus-outline-color - Focus outline of the label (desktop)\n * @cssprop --wcs-com-nav-category-desktop-menu-background-color - Background color of the category menu (desktop)\n * @cssprop --wcs-com-nav-category-desktop-menu--border-left-width - Border left width of the category menu\n * @cssprop --wcs-com-nav-category-desktop-menu--border-left-color - Border left color of the category menu\n * @cssprop --wcs-com-nav-category-desktop-menu-background-indicator-color - Indicator color on top of menu\n * @cssprop --wcs-com-nav-category-desktop-menu-padding-top - Padding top of menu\n * @cssprop --wcs-com-nav-category-desktop-menu-padding-bottom - Padding bottom of menu\n * @cssprop --wcs-com-nav-category-desktop-menu-padding-left - Padding left of menu\n * @cssprop --wcs-com-nav-category-desktop-menu-padding-right - Padding right of menu\n * @cssprop --wcs-com-nav-category-desktop-menu-gap - Gap between each item (desktop)\n * @cssprop --wcs-com-nav-category-item-desktop-color - Color of category item (desktop)\n * @cssprop --wcs-com-nav-category-item-desktop-font-weight - Font weight of category item (desktop)\n */\n@Component({\n    tag: 'wcs-com-nav-category',\n    styleUrl: 'com-nav-category.scss',\n    shadow: true,\n})\nexport class ComNavCategory implements ComponentInterface, MutableAriaAttribute {\n    @Element() private el!: HTMLWcsComNavCategoryElement;\n    private nativeButton!: HTMLButtonElement;\n    private inheritedAttributes: { [k: string]: any } = {};\n    \n    @Prop() label: string;\n    @State() private categoryOpen: boolean = false;\n    @Event() wcsCategoryOpened: EventEmitter<CategoryOpenedEventDetail>;\n\n    private categoryItemsId = `wcs-com-nav-category-items`;\n    private resizeObserver: ResizeObserver;\n    /**\n     * To re-trigger re-render in order to render a button in case of desktop or a heading in mobile case\n     * @private\n     */\n    @State() public currentActiveSizing: ComNavSize = 'desktop';\n\n    @Listen('click', {target: 'window'})\n    onWindowClickEvent(_: MouseEvent) {\n        if (this.categoryOpen) this.categoryOpen = false;\n    }\n\n    @Listen('wcsCategoryOpened', {target: 'window'})\n    onSubmenuOpened(event: CustomEvent<CategoryOpenedEventDetail>) {\n        if (event.detail.categoryElement !== this.el) {\n            this.categoryOpen = false;\n        }\n    }\n\n    componentDidLoad(): void {\n        if(!this.resizeObserver) {\n            this.resizeObserver = comNavDidLoadWithResizeObserver(this);\n            this.resizeObserver.observe(document.body);\n        }\n    }\n\n    /**\n     * Handle key down on category items\n     * @param _event the keyboard event\n     * @private\n     */\n    private handleCategoryItemsKeyDown(_event: KeyboardEvent) {\n        if ((isSpaceKey(_event)) || isEnterKey(_event)) {\n            this.handleItemClick(_event);\n        }\n    }\n    \n    componentWillLoad(): Promise<void> | void {\n        this.inheritedAttributes = {\n            ...inheritAriaAttributes(this.el),\n            ...inheritAttributes(this.el, COM_NAV_CATEGORY_INHERITED_ATTRS)\n        };\n    }\n\n    @Method()\n    async setAriaAttribute(attr: AriaAttributeName, value: string | null | undefined) {\n        setOrRemoveAttribute(this.nativeButton, attr, value);\n    }\n\n    /**\n     * Close the category\n     */\n    @Method()\n    async close() {\n        this.categoryOpen = false;\n    }\n\n    /**\n     * Opens the category\n     */\n    @Method()\n    async open() {\n        this.categoryOpen = true;\n    }\n\n    /**\n     * When the user clicks on the menu, we do not propagate the native event and we launch a custom event to manage\n     * the closing of the menu correctly\n     */\n    private onClick(evt: MouseEvent) {\n        evt.stopPropagation();\n        this.wcsCategoryOpened.emit({categoryElement: this.el})\n    }\n\n\n    /**\n     * Close the category and fire item click if we detect a mouse click on a slotted `a` element.\n     * @param evt\n     * @private\n     */\n    private handleItemClick(evt: UIEvent) {\n        if ((evt.target as HTMLElement).tagName === 'A') {\n            this.close();\n        }\n    }\n\n    disconnectedCallback(): void {\n        this.resizeObserver?.disconnect();\n    }\n\n    render(): any {\n        return (\n            <Host role={\"listitem\"} onClick={evt => this.onClick(evt)}>\n                {\n                    this.currentActiveSizing === 'mobile' ?\n                        <h3 role=\"presentation\" class=\"label-container\">\n                            <span class=\"label\">{this.label}</span>\n                        </h3>\n                        : <button class=\"label-container\"\n                            aria-controls={this.categoryItemsId}\n                            aria-expanded={this.categoryOpen ? 'true' : 'false'}\n                            ref={(el) => (this.nativeButton = el)}\n                            onClick={_ => this.categoryOpen = !this.categoryOpen}\n                            {...this.inheritedAttributes}>\n                            <span class=\"label\">{this.label}</span>\n                            <span class=\"arrow-container\">\n                                <span aria-hidden=\"true\" class=\"arrow-icon\">&#xf107;</span>\n                            </span>\n                        </button>\n                }\n                <div class=\"item-container\"\n                    role=\"list\"\n                    aria-label={this.label}\n                    id={this.categoryItemsId}\n                    tabIndex={-1}\n                    data-open={this.categoryOpen}\n                    onKeyDown={evt => this.handleCategoryItemsKeyDown(evt)}\n                    onClick={(evt) => this.handleItemClick(evt)}>\n                    <slot/>\n                </div>\n            </Host>\n        )\n    }\n\n}\n"],"mappings":"+JAAA,MAAMA,EAAoB,+iKAC1B,MAAAC,EAAeD,ECiBf,MAAME,EAAmC,CAAC,S,MAkC7BC,EAAc,M,8EAGfC,KAAAC,oBAA4C,GAM5CD,KAAAE,gBAAkB,6B,uCAHe,M,yBASS,S,CAGlD,kBAAAC,CAAmBC,GACf,GAAIJ,KAAKK,aAAcL,KAAKK,aAAe,K,CAI/C,eAAAC,CAAgBC,GACZ,GAAIA,EAAMC,OAAOC,kBAAoBT,KAAKU,GAAI,CAC1CV,KAAKK,aAAe,K,EAI5B,gBAAAM,GACI,IAAIX,KAAKY,eAAgB,CACrBZ,KAAKY,eAAiBC,EAAgCb,MACtDA,KAAKY,eAAeE,QAAQC,SAASC,K,EASrC,0BAAAC,CAA2BC,GAC/B,GAAKC,EAAWD,IAAYE,EAAWF,GAAS,CAC5ClB,KAAKqB,gBAAgBH,E,EAI7B,iBAAAI,GACItB,KAAKC,oBAAmBsB,OAAAC,OAAAD,OAAAC,OAAA,GACjBC,EAAsBzB,KAAKU,KAC3BgB,EAAkB1B,KAAKU,GAAIZ,G,CAKtC,sBAAM6B,CAAiBC,EAAyBC,GAC5CC,EAAqB9B,KAAK+B,aAAcH,EAAMC,E,CAOlD,WAAMG,GACFhC,KAAKK,aAAe,K,CAOxB,UAAM4B,GACFjC,KAAKK,aAAe,I,CAOhB,OAAA6B,CAAQC,GACZA,EAAIC,kBACJpC,KAAKqC,kBAAkBC,KAAK,CAAC7B,gBAAiBT,KAAKU,I,CAS/C,eAAAW,CAAgBc,GACpB,GAAKA,EAAII,OAAuBC,UAAY,IAAK,CAC7CxC,KAAKgC,O,EAIb,oBAAAS,G,OACIC,EAAA1C,KAAKY,kBAAc,MAAA8B,SAAA,SAAAA,EAAEC,Y,CAGzB,MAAAC,GACI,OACIC,EAACC,EAAI,CAAAC,IAAA,2CAACC,KAAM,WAAYd,QAASC,GAAOnC,KAAKkC,QAAQC,IAE7CnC,KAAKiD,sBAAwB,SACzBJ,EAAA,MAAIG,KAAK,eAAeE,MAAM,mBAC1BL,EAAA,QAAMK,MAAM,SAASlD,KAAKmD,QAE5BN,EAAA,SAAAtB,OAAAC,OAAA,CAAQ0B,MAAM,kBAAiB,gBACdlD,KAAKE,gBAAe,gBACpBF,KAAKK,aAAe,OAAS,QAC5C+C,IAAM1C,GAAQV,KAAK+B,aAAerB,EAClCwB,QAAS9B,GAAKJ,KAAKK,cAAgBL,KAAKK,cACpCL,KAAKC,qBACT4C,EAAA,QAAMK,MAAM,SAASlD,KAAKmD,OAC1BN,EAAA,QAAMK,MAAM,mBACRL,EAAA,sBAAkB,OAAOK,MAAM,cAAY,OAI3DL,EAAA,OAAAE,IAAA,2CAAKG,MAAM,iBACPF,KAAK,OAAM,aACChD,KAAKmD,MACjBE,GAAIrD,KAAKE,gBACToD,UAAW,EAAC,YACDtD,KAAKK,aAChBkD,UAAWpB,GAAOnC,KAAKiB,2BAA2BkB,GAClDD,QAAUC,GAAQnC,KAAKqB,gBAAgBc,IACvCU,EAAA,QAAAE,IAAA,8C"}