{"version":3,"names":["comNavSubmenuCss","WcsComNavSubmenuStyle0","COM_NAV_SUBMENU_INHERITED_ATTRS","WCS_COM_NAV_CATEGORY","ComNavSubmenu","this","inheritedAttributes","menuItemsId","componentWillLoad","slottedCategoryItems","el","querySelectorAll","registerCloseHandlerForFocusOutEventOn","Object","assign","inheritAriaAttributes","inheritAttributes","componentDidLoad","resizeObserver","comNavDidLoadWithResizeObserver","observe","document","body","onWindowClickEvent","_","menuOpen","onSubmenuOpened","event","detail","menuElement","onEscapeKeyDown","_event","isEscapeKey","setAriaAttribute","attr","value","setOrRemoveAttribute","nativeButton","close","open","onClick","evt","stopPropagation","wcsSubmenuOpened","emit","handleMenuItemsKeyDown","isSpaceKey","isEnterKey","handleMenuItemsClick","target","tagName","wcsCategoryItemClickedHandler","disconnectedCallback","_a","disconnect","render","h","Host","key","role","currentActiveSizing","class","label","ref","tabIndex","panelTitle","panelDescription","id","onKeyDown"],"sources":["src/components/com-nav-submenu/com-nav-submenu.scss?tag=wcs-com-nav-submenu&encapsulation=shadow","src/components/com-nav-submenu/com-nav-submenu.tsx"],"sourcesContent":["@import '../../style/focus-outline.scss';\n@import '../com-nav/com-nav-focus.scss';\n@import '../../style/breakpoints.scss';\n\n:host {\n    --wcs-com-nav-submenu-button-color: var(--wcs-semantic-color-text-primary);\n    --wcs-com-nav-submenu-button-font-weight: var(--wcs-semantic-font-weight-medium);\n    --wcs-com-nav-submenu-button-focus-outline-color: var(--wcs-semantic-color-border-focus-base);\n    --wcs-com-nav-submenu-button-gap: var(--wcs-semantic-spacing-base);\n\n    --wcs-com-nav-submenu-desktop-menu-background-color: var(--wcs-semantic-color-background-surface-primary);\n    --wcs-com-nav-submenu-desktop-menu-text-color: var(--wcs-semantic-color-text-primary);\n    --wcs-com-nav-submenu-desktop-menu-link-font-weight: var(--wcs-semantic-font-weight-roman);\n    --wcs-com-nav-submenu-desktop-menu-heading-font-weight: var(--wcs-semantic-font-weight-heavy);\n    --wcs-com-nav-submenu-desktop-menu-description-font-weight: var(--wcs-semantic-font-weight-roman);\n    --wcs-com-nav-submenu-desktop-menu-description-gap: var(--wcs-semantic-spacing-base);\n    --wcs-com-nav-submenu-desktop-menu-padding: 50px;\n\n    --wcs-com-nav-submenu-desktop-menu-items-padding-left: 50px;\n    --wcs-com-nav-submenu-desktop-menu-items-padding-right: 80px;\n\n    --wcs-com-nav-submenu-mobile-text-color: var(--wcs-semantic-color-text-primary);\n    --wcs-com-nav-submenu-mobile-link-font-weight: var(--wcs-semantic-font-weight-roman);\n    --wcs-com-nav-submenu-mobile-spacing-top: var(--wcs-semantic-spacing-large);\n    --wcs-com-nav-submenu-mobile-spacing-bottom: var(--wcs-semantic-spacing-large);\n    --wcs-com-nav-submenu-mobile-spacing-left: calc(var(--wcs-semantic-spacing-base) * 3);\n    --wcs-com-nav-submenu-mobile-gap: calc(var(--wcs-semantic-spacing-base) * 3);\n\n    display: block;\n    padding-bottom: var(--wcs-com-nav-submenu-mobile-spacing-bottom);\n\n    button { // reset button agent styles\n        display: block;\n        background: none;\n        border: none;\n        padding: 0;\n        margin: 0;\n        font: inherit;\n        color: inherit;\n        cursor: pointer;\n    }\n\n    .arrow-icon {\n        display: none;\n    }\n\n    .arrow-container {\n        display: none;\n    }\n\n    .label {\n        text-transform: uppercase;\n        font-size: 16px;\n        cursor: unset;\n        font-weight: var(--wcs-com-nav-submenu-button-font-weight);\n        color: var(--wcs-com-nav-submenu-button-color);\n        text-decoration: none;\n    }\n\n    .drawer {\n        display: contents;\n    }\n\n    .drawer-container {\n        display: contents;\n    }\n    .drawer-description {\n        display: none;\n    }\n\n    .menu-items {\n        display: flex;\n        flex-direction: column;\n        gap: var(--wcs-com-nav-submenu-mobile-gap);\n\n        ::slotted(wcs-com-nav-item) {\n            color: var(--wcs-com-nav-submenu-mobile-text-color);\n            font-weight: var(--wcs-com-nav-submenu-mobile-link-font-weight);\n        }\n    }\n}\n\n@include for-phone-only {\n    :host {\n        .menu-button {\n            margin: 0;\n        }\n\n        .menu-items {\n            margin-top: var(--wcs-com-nav-submenu-mobile-spacing-top);\n            margin-left: var(--wcs-com-nav-submenu-mobile-spacing-left);\n        }\n    }\n}\n\n@include for-tablet-portrait-up {\n    :host {\n        height: 100%;\n        padding-bottom: unset;\n\n        .menu-button {\n            display: flex;\n            align-items: center;\n            height: 100%;\n            cursor: pointer;\n            user-select: none;\n            font-weight: unset;\n            padding-left: unset;\n        }\n\n        .menu-button:focus-visible {\n            @include focus-outline(var(--wcs-com-nav-submenu-button-focus-outline-color), 2px, 0.1rem);\n        }\n\n        @supports not selector(.menu-button:focus-visible) {\n            @include focus-outline(var(--wcs-com-nav-submenu-button-focus-outline-color), 2px, 0.1rem);\n        }\n\n        .label {\n            text-transform: unset;\n            cursor: pointer;\n        }\n\n        .arrow-icon {\n            display: inline-block;\n            font-family: icons;\n            font-size: 0.6rem;\n            line-height: 1;\n            box-sizing: border-box;\n        }\n\n        .arrow-container {\n            display: unset;\n            margin-left: var(--wcs-com-nav-submenu-button-gap);\n        }\n\n        .arrow-icon:not([data-open]) {\n            transform: rotate(90deg);\n        }\n\n        .arrow-icon[data-open] {\n            transform: rotate(-90deg);\n        }\n\n        .drawer {\n            display: none;\n            position: absolute;\n            top: calc(var(--wcs-com-nav-menu-bar-height) + var(--wcs-com-nav-border-width));\n            z-index: 8888;\n            left: 0;\n            width: 100%;\n            box-sizing: border-box;\n            padding: var(--wcs-com-nav-submenu-desktop-menu-padding);\n            background-color: var(--wcs-com-nav-submenu-desktop-menu-background-color);\n            color: var(--wcs-com-nav-submenu-desktop-menu-text-color);\n\n            box-shadow: 0 4px 10px 0 rgba(0, 0, 0, 0.08); // TODO: wait solution for backdrop (introduce design token later)\n        }\n\n        .drawer-content {\n            display: flex;\n            justify-content: space-between;\n            max-width: 62.5%;\n            flex: 1;\n\n            div:first-child {\n                flex: 0.8;\n            }\n\n            div {\n                max-width: 260px;\n            }\n        }\n\n        .menu-items {\n            padding: 0 var(--wcs-com-nav-submenu-desktop-menu-items-padding-right) 0 var(--wcs-com-nav-submenu-desktop-menu-items-padding-left);\n            display: flex;\n            flex-direction: column;\n            align-items: flex-end;\n\n            ::slotted(wcs-com-nav-item) {\n                color: var(--wcs-com-nav-submenu-desktop-menu-text-color);\n                font-weight: var(--wcs-com-nav-submenu-desktop-menu-link-font-weight);\n            }\n\n            ::slotted(wcs-com-nav-item:focus-within) {\n                @include com-nav-submenu-item-desktop-focus-outline(var(--wcs-com-nav-submenu-desktop-menu-text-color));\n            }\n        }\n\n        .drawer-container {\n            display: flex;\n            max-width: var(--wcs-com-content-max-width);\n            margin: 0 auto;\n\n            h3 {\n                margin: 0 0 var(--wcs-com-nav-submenu-desktop-menu-description-gap) 0;\n                font-size: 1.5rem;\n                line-height: 1.25;\n                font-weight: var(--wcs-com-nav-submenu-desktop-menu-heading-font-weight);\n            }\n\n            p {\n                margin-top: 0;\n                margin-bottom: 1rem;\n                font-weight: var(--wcs-com-nav-submenu-desktop-menu-description-font-weight);\n                font-size: 1rem;\n                line-height: 1.375;\n            }\n        }\n\n        .drawer[data-open] {\n            display: block;\n        }\n        .drawer-description {\n            display: block;\n        }\n    }\n}\n","import {\n    Component,\n    ComponentInterface,\n    h,\n    Host,\n    Listen,\n    Prop,\n    State,\n    Element,\n    Event,\n    EventEmitter, Method\n} from '@stencil/core';\nimport {MenuOpenedEventDetail} from '../com-nav/com-nav-interface';\nimport { inheritAriaAttributes, inheritAttributes, isEnterKey, isEscapeKey, isSpaceKey, setOrRemoveAttribute } from \"../../utils/helpers\";\nimport { comNavDidLoadWithResizeObserver, registerCloseHandlerForFocusOutEventOn } from \"../com-nav/com-nav-utils\";\nimport { ComNavSize } from \"../com-nav/com-nav-size\";\nimport { AriaAttributeName, MutableAriaAttribute } from \"../../utils/mutable-aria-attribute\";\n\nconst COM_NAV_SUBMENU_INHERITED_ATTRS = ['title'];\n\nconst WCS_COM_NAV_CATEGORY = 'WCS-COM-NAV-CATEGORY';\n\n/**\n * The com-nav-submenu is a subcomponent of `wcs-com-nav`. It represents an expandable menu containing more items or categories.\n * \n * @cssprop --wcs-com-nav-submenu-button-color - Color of the menu label\n * @cssprop --wcs-com-nav-submenu-button-font-weight - Font-weight of the menu label\n * @cssprop --wcs-com-nav-submenu-button-focus-outline-color - Focus outline color of the menu label\n * @cssprop --wcs-com-nav-submenu-button-gap - Gap inside menu label between text and arrow indicator\n * @cssprop --wcs-com-nav-submenu-desktop-menu-background-color - Background color of the menu (desktop)\n * @cssprop --wcs-com-nav-submenu-desktop-menu-text-color - Text color inside menu (desktop)\n * @cssprop --wcs-com-nav-submenu-desktop-menu-link-font-weight - Link font-weight color inside menu (desktop)\n * @cssprop --wcs-com-nav-submenu-desktop-menu-heading-font-weight - Heading font-weight of the menu (desktop)\n * @cssprop --wcs-com-nav-submenu-desktop-menu-description-font-weight - Description font-weight of the menu (desktop)\n * @cssprop --wcs-com-nav-submenu-desktop-menu-description-gap - Gap between heading and description in the description section of the menu (desktop)\n * @cssprop --wcs-com-nav-submenu-desktop-menu-padding - Padding of the menu (desktop)\n * @cssprop --wcs-com-nav-submenu-desktop-menu-items-padding-left - Padding left around link items group in menu (desktop)\n * @cssprop --wcs-com-nav-submenu-desktop-menu-items-padding-right - Padding right around link items group in menu (desktop)\n * @cssprop --wcs-com-nav-submenu-mobile-text-color - Text color for each text (mobile)\n * @cssprop --wcs-com-nav-submenu-mobile-link-font-weight - Link font-weight for each link (mobile)\n * @cssprop --wcs-com-nav-submenu-mobile-spacing-top - Spacing around top of the submenu (mobile)\n * @cssprop --wcs-com-nav-submenu-mobile-spacing-bottom - Spacing around bottom of the submenu (mobile)\n * @cssprop --wcs-com-nav-submenu-mobile-spacing-left - Spacing around left of the submenu (mobile)\n * @cssprop --wcs-com-nav-submenu-mobile-gap - Gap between each item in submenu (mobile)\n */\n@Component({\n    tag: 'wcs-com-nav-submenu',\n    styleUrl: 'com-nav-submenu.scss',\n    shadow: true,\n})\nexport class ComNavSubmenu implements ComponentInterface, MutableAriaAttribute {\n    @Element() private el!: HTMLWcsComNavSubmenuElement;\n    private nativeButton!: HTMLButtonElement;\n    private inheritedAttributes: { [k: string]: any } = {};\n    \n    @Prop() label: string;\n    @Prop() panelTitle: string;\n    @Prop() panelDescription: string;\n    @State() private menuOpen: boolean = false;\n    @Event() wcsSubmenuOpened: EventEmitter<MenuOpenedEventDetail>;\n\n    private menuItemsId = `wcs-com-nav-submenu-items`;\n    private resizeObserver: ResizeObserver;\n    /**\n     * To re-trigger re-render in order to render a button in case of desktop or a heading in mobile case\n     * @private\n     */\n    @State() public currentActiveSizing: ComNavSize = 'desktop';\n\n    componentWillLoad(): Promise<void> | void {\n        const slottedCategoryItems = this.el.querySelectorAll(':scope > wcs-com-nav-category:not([slot])');\n        registerCloseHandlerForFocusOutEventOn<HTMLWcsComNavCategoryElement>(slottedCategoryItems, WCS_COM_NAV_CATEGORY);\n\n        this.inheritedAttributes = {\n            ...inheritAriaAttributes(this.el),\n            ...inheritAttributes(this.el, COM_NAV_SUBMENU_INHERITED_ATTRS)\n        };\n    }\n\n    componentDidLoad(): void {\n        if(!this.resizeObserver) {\n            this.resizeObserver = comNavDidLoadWithResizeObserver(this);\n            this.resizeObserver.observe(document.body);\n        }\n    }\n\n    /**\n     * If the user clicks outside the menu, we close it\n     */\n    @Listen('click', {target: 'window'})\n    onWindowClickEvent(_: MouseEvent) {\n        if (this.menuOpen) this.menuOpen = false;\n    }\n\n    @Listen('wcsSubmenuOpened', {target: 'window'})\n    onSubmenuOpened(event: CustomEvent<MenuOpenedEventDetail>) {\n        // If the clicked menu is not this component, we close it\n        if (event.detail.menuElement !== this.el) {\n            this.menuOpen = false;\n        }\n    }\n\n    /**\n     * Close the menu when escape is pressed\n     * @param _event keydown event\n     */\n    @Listen('keydown', {target: 'window'})\n    onEscapeKeyDown(_event: KeyboardEvent) {\n        if (isEscapeKey(_event) && this.menuOpen) {\n            this.menuOpen = false;\n        }\n    }\n\n    @Method()\n    async setAriaAttribute(attr: AriaAttributeName, value: string | null | undefined) {\n        setOrRemoveAttribute(this.nativeButton, attr, value);\n    }\n\n    /**\n     * Close the menu\n     */\n    @Method()\n    async close() {\n        this.menuOpen = false;\n    }\n\n    /**\n     * Opens the menu\n     */\n    @Method()\n    async open() {\n        this.menuOpen = true;\n    }\n\n    /**\n     * When the user clicks on the menu, we do not propagate the native event and we launch a custom event to manage\n     * the closing of the menu correctly\n     */\n    private onClick(evt: MouseEvent) {\n        evt.stopPropagation();\n        this.wcsSubmenuOpened.emit({menuElement: this.el})\n    }\n\n    /**\n     * Handle key down on menu items\n     * @param _event the keyboard event\n     * @private\n     */\n    private handleMenuItemsKeyDown(_event: KeyboardEvent) {\n        if ((isSpaceKey(_event)) || isEnterKey(_event)) {\n            this.handleMenuItemsClick(_event);\n        }\n    }\n\n    private handleMenuItemsClick(evt: UIEvent) {\n        if ((evt.target as HTMLElement).tagName === 'A') {\n            this.close();\n        }\n    }\n\n    /**\n     * handle category item click to close the submenu\n     * @param _\n     * @private\n     */\n    @Listen('wcsClickOnFinalAction')\n    // @ts-ignore\n    private wcsCategoryItemClickedHandler(_: CustomEvent<UIEvent>) {\n        // If a category item is clicked, we close the submenu drawer;\n        this.close();\n    }\n\n    disconnectedCallback(): void {\n        this.resizeObserver?.disconnect();\n    }\n\n    render(): any {\n        return (\n            <Host onClick={evt => this.onClick(evt)} role=\"listitem\" data-open={this.menuOpen}>\n                {this.currentActiveSizing === 'mobile' ?\n                    <h2 role=\"presentation\" class=\"menu-button\">\n                        <span class=\"label\">{this.label}</span><span class=\"arrow-container\">\n                        <span class=\"arrow-icon\" data-open={this.menuOpen}>&#xf107;</span></span>\n                    </h2>\n                    : <button onClick={_ => this.menuOpen = !this.menuOpen}\n                              aria-expanded={this.menuOpen ? 'true' : 'false'}\n                              aria-controls={this.menuItemsId}\n                              class=\"menu-button\"\n                              ref={(el) => (this.nativeButton = el)}\n                              {...this.inheritedAttributes}>\n                        <span class=\"label\">{this.label}</span><span class=\"arrow-container\">\n                        <span aria-hidden=\"true\" class=\"arrow-icon\" data-open={this.menuOpen}>&#xf107;</span></span>\n                    </button>\n                }\n                <div class=\"drawer\" data-open={this.menuOpen} tabIndex={-1}>\n                <div class=\"drawer-container\">\n                    <div class=\"drawer-content\">\n                        <div class=\"drawer-description\">\n                            <h3>{this.panelTitle}</h3>\n                            <p>{this.panelDescription}</p>\n                        </div>\n                        <div role=\"list\" aria-label={this.label} id={this.menuItemsId} class=\"menu-items\"\n                             onClick={(evt) => this.handleMenuItemsClick(evt)}\n                                 onKeyDown={evt => this.handleMenuItemsKeyDown(evt)}>\n                                <slot/>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </Host>\n        );\n    }\n}\n"],"mappings":"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"}