{"file":"com-nav-utils-ff4f0bef.js","mappings":";;;;AAKA;;;;;;;;SAQgB,sCAAsC,CAA+B,cAAmC,EAAE,eAAuB;IAC7I,cAAc,CAAC,OAAO,CAAC,aAAa;QAChC,aAAa,CAAC,gBAAgB,CAAC,UAAU,EAAE,CAAC,GAAe;YACvD,MAAM,oBAAoB,GAAG,GAAG,CAAC,aAA4B,CAAC;YAC9D,IAAI,CAAC,6BAA6B,CAAC,aAAa,EAAE,oBAAoB,CAAC,EAAE;gBACrE,MAAM,iBAAiB,GAAI,GAAa,CAAC,YAAY,EAAE,CAAC;gBACxD,IAAI,uCAAuC,CAAC,iBAAiB,EAAE,eAAe,CAAC,EAAE;oBAC5E,iBAAiB,CAAC,MAAM,CAAC,yBAAyB,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAkB,CAAC,KAAK,EAAE,CAAC;iBACrG;aACJ;SACJ,CAAC,CAAA;KACL,CAAC,CAAC;AACP,CAAC;AAED,SAAS,6BAA6B,CAAC,aAAsB,EAAE,OAAgB;IAC3E,OAAO,aAAa,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;AAC3C,CAAC;AAED,SAAS,yBAAyB,CAAC,QAAgB;IAC/C,OAAO,CAAC,IAAK,CAAiB,CAAC,QAAQ,KAAK,QAAQ,CAAC;AACzD,CAAC;AAED,SAAS,uCAAuC,CAAC,iBAAgC,EAAE,QAAgB;IAC/F,OAAO,iBAAiB,CAAC,GAAG,CAAC,CAAC,IAAK,CAAiB,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;AAC5F,CAAC;SAEe,+BAA+B,CAAC,aAAsD;IAClG,MAAM,eAAe,GAAGA,+BAAuB,CAAC,kCAAkC,CAAC,IAAI,OAAO,CAAC;IAC/F,MAAM,oBAAoB,GAAG,QAAQ,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;IAE3D,OAAO,IAAI,cAAc,CAAC,KAAK;QAC3B,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC;QAChC,MAAM,YAAY,GAAG,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC;QACzC,MAAM,WAAW,GAAG,EAAE,CAAC,IAAI,CAAC;QAC5B,IAAI,EAAE,CAAC,KAAK,IAAI,oBAAoB,IAAI,WAAW,GAAG,YAAY,CAAC,EAAE;YACjE,aAAa,CAAC,mBAAmB,GAAG,QAAQ,CAAC;SAChD;aAAM;YACH,aAAa,CAAC,mBAAmB,GAAG,SAAS,CAAC;SACjD;KACJ,CAAC,CAAC;AACP;;;;;","names":["getCssRootPropertyValue"],"sources":["src/components/com-nav/com-nav-utils.ts"],"sourcesContent":["import { getCssRootPropertyValue } from \"../../utils/helpers\";\nimport { ComNav } from \"./com-nav\";\nimport { ComNavSubmenu } from \"../com-nav-submenu/com-nav-submenu\";\nimport { ComNavCategory } from \"../com-nav-category/com-nav-category\";\n\n/**\n * This function add event handlers on the navigableItems list. The handlers call the function close() on the nodeName.\n *\n * T: type class of the nodeNameToClose param (must have a close function)\n *\n * @param navigableItems items on which focusout event listeners must be added\n * @param nodeNameToClose nodeName of the element we want to close in the event path\n */\nexport function registerCloseHandlerForFocusOutEventOn<T extends {close: () => any}>(navigableItems: NodeListOf<Element>, nodeNameToClose: string): void {\n    navigableItems.forEach(navigableItem => {\n        navigableItem.addEventListener(\"focusout\", (evt: FocusEvent) => {\n            const relatedTargetElement = evt.relatedTarget as HTMLElement;\n            if (!isElementChildOfNavigableItem(navigableItem, relatedTargetElement)) {\n                const eventComposedPath = (evt as Event).composedPath();\n                if (isEventThrownFromChildOfNodeNameToClose(eventComposedPath, nodeNameToClose)) {\n                    (eventComposedPath.filter(eventTargetNodeNameEquals(nodeNameToClose))[0] as unknown as T).close();\n                }\n            }\n        })\n    });\n}\n\nfunction isElementChildOfNavigableItem(navigableItem: Element, element: Element) {\n    return navigableItem.contains(element);\n}\n\nfunction eventTargetNodeNameEquals(nodeName: string) {\n    return x => (x as HTMLElement).nodeName === nodeName;\n}\n\nfunction isEventThrownFromChildOfNodeNameToClose(eventComposedPath: EventTarget[], nodeName: string) {\n    return eventComposedPath.map(x => (x as HTMLElement).nodeName).indexOf(nodeName) !== -1;\n}\n\nexport function comNavDidLoadWithResizeObserver(comNavElement: ComNav | ComNavSubmenu | ComNavCategory): ResizeObserver {\n    const smallBreakpoint = getCssRootPropertyValue('--wcs-phone-breakpoint-max-width') || '575px';\n    const smallBreakpointValue = parseInt(smallBreakpoint, 10);\n\n    return new ResizeObserver(entry => {\n        const cr = entry[0].contentRect;\n        const paddingRight = cr.right - cr.width;\n        const paddingLeft = cr.left;\n        if (cr.width <= smallBreakpointValue - (paddingLeft + paddingRight)) {\n            comNavElement.currentActiveSizing = 'mobile';\n        } else {\n            comNavElement.currentActiveSizing = 'desktop';\n        }\n    });\n}\n"],"version":3}